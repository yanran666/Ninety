<view class="detail-wrapper">

  <!-- âœ… æ•´ä½“å³å + å®½åº¦é€‚é…çš„å†…å®¹åŒºåŸŸ -->
  <view class="page-content">
    <image class="product-image" src="{{product.image}}" mode="aspectFit"></image>

    <view class="product-name">{{product.name}}</view>

    <t-divider />

    <view class="product-desc">{{product.description}}</view>

    <t-divider />

<!-- ğŸ§ å†°é‡è§„æ ¼ -->
<view class="spec-group">
  <view class="spec-title">å†°é‡</view>
  <view class="spec-options">
    <block wx:for="{{specs.ice}}" wx:key="index">
      <view 
        class="spec-btn {{selectedOptions.ice === item ? 'selected' : ''}}" 
        bindtap="selectSpec" 
        data-type="ice" 
        data-value="{{item}}"
      >
        {{item}}
      </view>
    </block>
  </view>
</view>

<!-- ğŸ¬ ç”œåº¦ -->
<view class="spec-group">
  <view class="spec-title">ç”œåº¦</view>
  <view class="spec-options">
    <block wx:for="{{specs.sweetness}}" wx:key="index">
      <view 
        class="spec-btn {{selectedOptions.sweetness === item ? 'selected' : ''}}" 
        bindtap="selectSpec" 
        data-type="sweetness" 
        data-value="{{item}}"
      >
        {{item}}
      </view>
    </block>
  </view>
</view>

<!-- ğŸ¥ƒ é…’åŠ² -->
<view class="spec-group">
  <view class="spec-title">é…’åŠ²</view>
  <view class="spec-options">
    <block wx:for="{{specs.strength}}" wx:key="index">
      <view 
        class="spec-btn {{selectedOptions.strength === item ? 'selected' : ''}}" 
        bindtap="selectSpec" 
        data-type="strength" 
        data-value="{{item}}"
      >
        {{item}}
      </view>
    </block>
  </view>
</view>

<!-- ğŸ’¬ è¯„è®º -->
<view class="comment-section">
  <view class="comment-title">ç”¨æˆ·è¯„è®º</view>
  <block wx:for="{{comments}}" wx:key="id">
    <view class="comment-item">
      <image class="avatar" src="{{item.avatar || 'https://cdn-icons-png.flaticon.com/512/3135/3135715.png'}}" mode="aspectFill" />
      <view class="comment-content">
        <view class="username">{{item.nickname}}</view>
        <!-- âœ… æ˜Ÿçº§å±•ç¤ºï¼ˆç”¨ class æ§åˆ¶é¢œè‰²ï¼‰ -->
        <view class="stars">
          <block wx:for="{{[1,2,3,4,5]}}" wx:for-item="star" wx:key="star">
            <text class="star {{star <= item.score ? 'filled' : ''}}">â˜…</text>
          </block>
        </view>
        <view class="text">{{item.comment}}</view>
      </view>
    </view>
  </block>
</view>

<!-- åº•éƒ¨æµ®åŠ¨è´­ç‰©æ  -->
<view class="cart-bar">
  <view class="top-row">
    <view class="like-wrapper" bindtap="toggleFavorite">
    <image class="like-icon" src="{{isFavorited ? redHeartUrl : grayHeartUrl}}" />
    <text class="like-text">æ”¶è—å£å‘³</text>
    </view>

    <view class="right">
      <view class="circle gray" bindtap="decreaseQuantity">-</view>
      <text class="quantity">{{quantity}}</text>
      <view class="circle black" bindtap="increaseQuantity">+</view>
    </view>
  </view>

  <button class="add-to-cart-btn" bindtap="addToCart">
  <text class="price-text">ï¿¥{{totalPrice}}</text>
  <text class="btn-text">åŠ å…¥è´­ç‰©è¢‹</text>
  </button>

</view>


  </view>
</view>
